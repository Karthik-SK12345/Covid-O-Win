{% extends 'main/base.html' %}
{% load static %}

{% block contentTitle %}
    Nearby Hospitals
{% endblock contentTitle %}

{% block content %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Hello, world!</title>
  </head>
  <style>html,
    body {
      margin: 0;
      padding: 0;
    }
    
    #map {
      height: 500px;
      margin: 10px auto;
      width: 800px;
    }
    body {
        background: #eee
    }
    
    .ratings i {
        color: green
    }
    
    .install span {
        font-size: 12px
    }
    
    .col-md-4 {
        margin-top: 27px
    }
</style>
  <body>
    <div id="map"></div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBuBzeYkYimIquGG5KkIcB6vFmtHMUzDFo&signed_in=true&libraries=places&callback=initMap" async defer></script>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-4">
                <div class="card p-3">
                    <div class="d-flex flex-row mb-3"><img src="https://cdn3.vectorstock.com/i/thumb-large/35/22/letter-h-cross-plus-logo-icon-design-template-vector-24613522.jpg" width="70">
                        <div class="d-flex flex-column ml-2"><span>BMS Hospital</span><span class="text-black-50">Opens 24 Hours</span><span class="ratings"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></span></div>
                    </div>
                    <h6>Address: No 618, Sri Mallikarjuna Swamy, Gangamma Temple St, NR Colony, Bengaluru, Karnataka 560019</h6>
                    <div class="d-flex justify-content-between install mt-3"><span>Check Out Site</span><span class="text-primary"><a href="http://www.bmshospital.com/">Open</a><i class="fa fa-angle-right"></i></span></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <div class="d-flex flex-row mb-3"><img src="https://cdn3.vectorstock.com/i/thumb-large/35/22/letter-h-cross-plus-logo-icon-design-template-vector-24613522.jpg" width="70">
                        <div class="d-flex flex-column ml-2"><span>Digvish Hospital
                        </span><span class="text-black-50">Open 24 Hours</span><span class="ratings"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></span></div>
                    </div>
                    <h6>Address: 80 Feet Rd, Ashok Nagar, Banashankari Stage I, Banashankari, Bengaluru, Karnataka 560050</h6>
                    <div class="d-flex justify-content-between install mt-3"><span>Check Out Site</span><span class="text-primary"><a href="http://www.digvishhospital.com/">Open</a><i class="fa fa-angle-right"></i></span></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <div class="d-flex flex-row mb-3"><img src="https://cdn3.vectorstock.com/i/thumb-large/35/22/letter-h-cross-plus-logo-icon-design-template-vector-24613522.jpg" width="70">
                        <div class="d-flex flex-column ml-2"><span>KIMS Hospital & Research Centre
                        </span><span class="text-black-50">Open 24 Hours</span><span class="ratings"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></span></div>
                    </div>
                    <h6>Address: Krishna Rajendra Rd, Parvathipuram, Vishweshwarapura, Shankarapura, Bengaluru, Karnataka 560002</h6>
                    <div class="d-flex justify-content-between install mt-3"><span>Check Out Site</span><span class="text-primary"><a href="http://www.kimsbangalore.edu.in/">Open</a><i class="fa fa-angle-right"></i></span></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <div class="d-flex flex-row mb-3"><img src="https://cdn3.vectorstock.com/i/thumb-large/35/22/letter-h-cross-plus-logo-icon-design-template-vector-24613522.jpg" width="70">
                        <div class="d-flex flex-column ml-2"><span>Leelavatti multi speciality hospital
                        </span><span class="text-black-50">Oepn 24 Hours</span><span class="ratings"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></span></div>
                    </div>
                    <h6>Address: 7, 2nd Main Rd, Kamalanagar, Chamrajpet, Bengaluru, Karnataka 560018</h6>
                    <div class="d-flex justify-content-between install mt-3"><span>Check Out Site</span><span class="text-primary"><a href="http://www.kimsbangalore.edu.in/">Open</a><i class="fa fa-angle-right"></i></span></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <div class="d-flex flex-row mb-3"><img src="https://cdn3.vectorstock.com/i/thumb-large/35/22/letter-h-cross-plus-logo-icon-design-template-vector-24613522.jpg" width="70">
                        <div class="d-flex flex-column ml-2"><span>BBMP hospital, Sirsi road
                        </span><span class="text-black-50">Open 24 Hours</span><span class="ratings"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></span></div>
                    </div>
                    <h6>Address: Unnamed Road, Chamrajpet, Bengaluru, Karnataka 560018
                    </h6>
                    <div class="d-flex justify-content-between install mt-3"><span>Check Out Site</span><span class="text-primary"><a href="http://www.kimsbangalore.edu.in/">Open</a><i class="fa fa-angle-right"></i></span></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <div class="d-flex flex-row mb-3"><img src="https://cdn3.vectorstock.com/i/thumb-large/35/22/letter-h-cross-plus-logo-icon-design-template-vector-24613522.jpg" width="70">
                        <div class="d-flex flex-column ml-2"><span>Shekar Hospital
                        </span><span class="text-black-50">Open 24 Hours</span><span class="ratings"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></span></div>
                    </div>
                    <h6>Address: Bull Temple Rd, Mahantara Lay Out, Kempegowda Nagar, Bengaluru, Karnataka 560019</h6>
                    <div class="d-flex justify-content-between install mt-3"><span>Check Out Site</span><span class="text-primary"><a href="https://shekharhospital.bizdigital.com/">Open</a><i class="fa fa-angle-right"></i></span></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
  <script>
    var map;

    function initMap() {
      if (navigator.geolocation) {
        try {
          navigator.geolocation.getCurrentPosition(function(position) {
            var myLocation = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            setPos(myLocation);
          });
        } catch (err) {
         
          var myLocation = {
                    lat:12.941200404854646,
            lng: 77.56534340651622
          };
          setPos(myLocation);
        }
      } else {
        var myLocation = {
          lat: 12.941200404854646,
            lng: 77.56534340651622
        };
        setPos(myLocation);
      }
    }

    function setPos(myLocation) {
      map = new google.maps.Map(document.getElementById('map'), {
        center: myLocation,
        zoom: 10
      });

      var service = new google.maps.places.PlacesService(map);
      service.nearbySearch({
        location: myLocation,
        radius: 4000,
        types: ['hospital']
      }, processResults);

    }

    function processResults(results, status, pagination) {
      if (status !== google.maps.places.PlacesServiceStatus.OK) {
        return;
      } else {
        createMarkers(results);

      }
    }

    function createMarkers(places) {
      var bounds = new google.maps.LatLngBounds();
      var placesList = document.getElementById('places');

      for (var i = 0, place; place = places[i]; i++) {
        var image = {
          url: place.icon,
          size: new google.maps.Size(71, 71),
          origin: new google.maps.Point(0, 0),
          anchor: new google.maps.Point(17, 34),
          scaledSize: new google.maps.Size(25, 25)
        };

        var marker = new google.maps.Marker({
          map: map,
          icon: image,
          title: place.name,
          animation: google.maps.Animation.DROP,
          position: place.geometry.location
        });

        bounds.extend(place.geometry.location);
      }
      map.fitBounds(bounds);
    }
  </script>
</html>
{% endblock content %}